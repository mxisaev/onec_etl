#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
"""

import sys
from pathlib import Path

# –î–æ–±–∞–≤–ª—è–µ–º –ø—É—Ç—å –∫ –Ω–∞—à–µ–º—É –ø—Ä–æ–µ–∫—Ç—É
current_dir = Path(__file__).parent
sys.path.append(str(current_dir))

from database.scripts.migrate_product_properties import parse_product_properties

def test_parsing():
    """–¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞"""
    
    # –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ç—Ä–æ–∫–∏ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
    test_cases = [
        "–ë—Ä–µ–Ω–¥: Lemark | –ú–∞—Ç–µ—Ä–∏–∞–ª: –õ–∞—Ç—É–Ω—å | –¶–≤–µ—Ç: –•—Ä–æ–º | –ì–∞—Ä–∞–Ω—Ç–∏—è: 4 –≥–æ–¥–∞ | –°—Ç—Ä–∞–Ω–∞: –ö–∏—Ç–∞–π | –¢–∏–ø —Å–º–µ—Å–∏—Ç–µ–ª—è: –î–≤—É—Ö—Ä—É—á–∫–æ–≤—ã–π | –°–µ—Ä–∏—è: –°–µ—Ä–∏—è Neo | –¢–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É | –ú–∞—Ç–µ—Ä–∏–∞–ª —Ä—É—á–∫–∏: –ú–µ—Ç–∞–ª–ª | –¢–æ–≤–∞—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –°–º–µ—Å–∏—Ç–µ–ª–∏ –¥–ª—è –≤–∞–Ω–Ω—ã | –í–∏–¥ –ª–µ–π–∫–∏: 1-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è | –í–∏–¥ –¥–∏–≤–µ—Ä—Ç–æ—Ä–∞: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–ª–∞—Å—Ç–∏–Ω–∞–º–∏ | –¢–∏–ø –∏–∑–ª–∏–≤–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –ì–æ—Ä–æ–¥: Jesenice U Prahy Czech republic | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–ú–∞—Ä–∫–∏: Lemark | –° –¥–æ–Ω–Ω—ã–º –∫–ª–∞–ø–∞–Ω–æ–º (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –°–µ–Ω—Å–æ—Ä–Ω—ã–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –° —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–π —Ä—É—á–∫–æ–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –¢–∏–ø –∫–æ—Ä–ø—É—Å–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –°—Ç–∞–Ω–¥–∞—Ä—Ç –ø–æ–¥–≤–æ–¥–∫–∏ —à–ª–∞–Ω–≥–∞ (–°–º–µ—Å–∏—Ç–µ–ª–∏): 1/2\" | –¢–µ—Ä–º–æ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –ù–∞–ª–∏—á–∏–µ –¥—É—à–µ–≤–æ–≥–æ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞: –ï—Å—Ç—å | –û—Ç–≤–µ—Ä—Å—Ç–∏–µ –¥–ª—è —Å–º–µ—Å–∏—Ç–µ–ª—è: 2 | –î–ª—è —Ä–∞–∫–æ–≤–∏–Ω—ã-—á–∞—à–∏: –ù–µ—Ç | –¢–∏–ø –¥–ª–∏–Ω—ã –∏–∑–ª–∏–≤–∞: –î–ª–∏–Ω–Ω—ã–π | –ö—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–µ–π–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É",
        "| –ú–∞—Ç–µ—Ä–∏–∞–ª: –õ–∞—Ç—É–Ω—å | –¶–≤–µ—Ç: –•—Ä–æ–º | –ì–∞—Ä–∞–Ω—Ç–∏—è: 4 –≥–æ–¥–∞ | –°—Ç—Ä–∞–Ω–∞: –ö–∏—Ç–∞–π | –¢–∏–ø —Å–º–µ—Å–∏—Ç–µ–ª—è: –î–≤—É—Ö—Ä—É—á–∫–æ–≤—ã–π | –°–µ—Ä–∏—è: –°–µ—Ä–∏—è Neo | –¢–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É | –ú–∞—Ç–µ—Ä–∏–∞–ª —Ä—É—á–∫–∏: –ú–µ—Ç–∞–ª–ª | –¢–æ–≤–∞—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –°–º–µ—Å–∏—Ç–µ–ª–∏ –¥–ª—è –≤–∞–Ω–Ω—ã | –í–∏–¥ –ª–µ–π–∫–∏: 1-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è | –í–∏–¥ –¥–∏–≤–µ—Ä—Ç–æ—Ä–∞: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–ª–∞—Å—Ç–∏–Ω–∞–º–∏ | –¢–∏–ø –∏–∑–ª–∏–≤–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –ì–æ—Ä–æ–¥: Jesenice U Prahy Czech republic | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–ú–∞—Ä–∫–∏: Lemark | –° –¥–æ–Ω–Ω—ã–º –∫–ª–∞–ø–∞–Ω–æ–º (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –°–µ–Ω—Å–æ—Ä–Ω—ã–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –° —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–π —Ä—É—á–∫–æ–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –¢–∏–ø –∫–æ—Ä–ø—É—Å–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –°—Ç–∞–Ω–¥–∞—Ä—Ç –ø–æ–¥–≤–æ–¥–∫–∏ —à–ª–∞–Ω–≥–∞ (–°–º–µ—Å–∏—Ç–µ–ª–∏): 1/2\" | –¢–µ—Ä–º–æ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –ù–∞–ª–∏—á–∏–µ –¥—É—à–µ–≤–æ–≥–æ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞: –ï—Å—Ç—å | –û—Ç–≤–µ—Ä—Å—Ç–∏–µ –¥–ª—è —Å–º–µ—Å–∏—Ç–µ–ª—è: 2 | –î–ª—è —Ä–∞–∫–æ–≤–∏–Ω—ã-—á–∞—à–∏: –ù–µ—Ç | –¢–∏–ø –¥–ª–∏–Ω—ã –∏–∑–ª–∏–≤–∞: –î–ª–∏–Ω–Ω—ã–π | –ö—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–µ–π–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É",
        "| –í–∏–¥ –∞—ç—Ä–∞—Ç–æ—Ä–∞: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π | –¢–∏–ø —Å–º–µ—Å–∏—Ç–µ–ª—è: –î–≤—É—Ö—Ä—É—á–∫–æ–≤—ã–π | –°–µ—Ä–∏—è: –°–µ—Ä–∏—è Neo | –¢–∏–ø —É—Å—Ç–∞–Ω–æ–≤–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É | –ú–∞—Ç–µ—Ä–∏–∞–ª —Ä—É—á–∫–∏: –ú–µ—Ç–∞–ª–ª | –¢–æ–≤–∞—Ä–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è: –°–º–µ—Å–∏—Ç–µ–ª–∏ –¥–ª—è –≤–∞–Ω–Ω—ã | –í–∏–¥ –ª–µ–π–∫–∏: 1-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è | –í–∏–¥ –¥–∏–≤–µ—Ä—Ç–æ—Ä–∞: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å —Å –∫–µ—Ä–∞–º–∏—á–µ—Å–∫–∏–º–∏ –ø–ª–∞—Å—Ç–∏–Ω–∞–º–∏ | –¢–∏–ø –∏–∑–ª–∏–≤–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –ì–æ—Ä–æ–¥: Jesenice U Prahy Czech republic | –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–ú–∞—Ä–∫–∏: Lemark | –° –¥–æ–Ω–Ω—ã–º –∫–ª–∞–ø–∞–Ω–æ–º (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –°–µ–Ω—Å–æ—Ä–Ω—ã–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –° —Ö–∏—Ä—É—Ä–≥–∏—á–µ—Å–∫–æ–π —Ä—É—á–∫–æ–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –¢–∏–ø –∫–æ—Ä–ø—É—Å–∞: –ü–æ–≤–æ—Ä–æ—Ç–Ω—ã–π | –°—Ç–∞–Ω–¥–∞—Ä—Ç –ø–æ–¥–≤–æ–¥–∫–∏ —à–ª–∞–Ω–≥–∞ (–°–º–µ—Å–∏—Ç–µ–ª–∏): 1/2\" | –¢–µ—Ä–º–æ—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π (–°–º–µ—Å–∏—Ç–µ–ª–∏): –ù–µ—Ç | –ù–∞–ª–∏—á–∏–µ –¥—É—à–µ–≤–æ–≥–æ –≥–∞—Ä–Ω–∏—Ç—É—Ä–∞: –ï—Å—Ç—å | –û—Ç–≤–µ—Ä—Å—Ç–∏–µ –¥–ª—è —Å–º–µ—Å–∏—Ç–µ–ª—è: 2 | –î–ª—è —Ä–∞–∫–æ–≤–∏–Ω—ã-—á–∞—à–∏: –ù–µ—Ç | –¢–∏–ø –¥–ª–∏–Ω—ã –∏–∑–ª–∏–≤–∞: –î–ª–∏–Ω–Ω—ã–π | –ö—Ä–µ–ø–ª–µ–Ω–∏–µ –ª–µ–π–∫–∏: –ù–∞ —Å—Ç–µ–Ω—É"
    ]
    
    print("üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫")
    print("=" * 60)
    
    for i, test_string in enumerate(test_cases, 1):
        print(f"\nüìù –¢–µ—Å—Ç {i}:")
        print(f"–í—Ö–æ–¥–Ω–∞—è —Å—Ç—Ä–æ–∫–∞: '{test_string[:100]}...'")
        
        result = parse_product_properties(test_string)
        
        print(f"–†–µ–∑—É–ª—å—Ç–∞—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞:")
        for key, value in result.items():
            print(f"  '{key}' -> '{value}'")
        
        print(f"–í—Å–µ–≥–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫: {len(result)}")
        
        # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —Å–∏–º–≤–æ–ª—ã | –≤ –∫–ª—é—á–∞—Ö
        problematic_keys = [key for key in result.keys() if '|' in key]
        if problematic_keys:
            print(f"‚ùå –ü–†–û–ë–õ–ï–ú–ê: –ù–∞–π–¥–µ–Ω—ã –∫–ª—é—á–∏ —Å —Å–∏–º–≤–æ–ª–æ–º |: {problematic_keys}")
        else:
            print("‚úÖ –í—Å–µ –∫–ª—é—á–∏ –æ—á–∏—â–µ–Ω—ã –æ—Ç —Å–∏–º–≤–æ–ª–∞ |")
        
        print("-" * 40)

if __name__ == '__main__':
    test_parsing() 